# CodeScribe
nextBTC公共铭文工具
CodeScribe V2.1
用户使用说明书
作者: 达哥(@Btcdage)
2025.9.8
欢迎使用 nextBTC 公共铭文工具！本工具能让您将任意文本压缩后，安全、高效地“铭刻”到 nextBTC 区块链上，并能通过一个简单的入口轻松读取。它遵循“分层”的比特币哲学，旨在提供一个强大的链上内容发布功能，同时不增加主链的负担。 
1. 首次运行与环境配置
在使用本工具前，请确保您的计算机环境已满足以下全部条件：
1.运行 nextBTC 核心节点：
您必须已经安装并运行了 nextBTC 核心全节点（nextbtc.rf.gd）。
确保您的节点已经完全同步了区块链数据，并且处于正在运行的状态。
2.正确配置 bitcoin.conf 文件：
在您的 nextBTC 数据目录中，找到 bitcoin.conf 文件。
确保文件中至少包含以下四行，并取消了注释（即没有 # 开头）：
server=1
txindex = 1
rpcuser=your_rpc_username
rpcpassword=your_strong_rpc_password
推荐配置：为了获得最佳的成本估算和交易发送体验，建议您同时设置交易费：
settxfee=0.0001 
3.钱包准备：
您的 nextBTC 节点必须至少创建并加载了一个或多个钱包。
确保钱包里有足够的 nextBTC，用于支付铭刻时产生的手续费。
4.初始化设置：
首次运行本工具时，会弹窗要求您“选择Bitcoin数据文件夹”。请务/必选择您 nextBTC 核心节点的数据目录（即 bitcoin.conf 文件所在的那个目录）。
选择正确后，程序会自动读取配置并保存，之后启动不再需要此步骤。
2. ✍铭刻文本 (写入)
这是将您的思想和数据永久记录到链上的核心功能。
第 1 步：输入内容
在“✍️ 铭刻文本”选项卡中，将您想要发布的任意文本粘贴或输入到大的文本框内。
第 2 步：启动流程与成本确认 (新功能!)
点击 [开始铭刻流程] 按钮。
程序会立即对您的文本进行压缩，并计算出需要发送多少笔交易。
接着，会弹出一个“成本预估与操作确认”对话框。
请仔细阅读！ 这个对话框会告诉您需要发送的交易数量，以及根据您 bitcoin.conf 中设置的手续费，预估出的总手续费成本。
点击“是”，才会继续执行后续步骤。
点击“否”，操作将安全取消，不会产生任何费用。

 
 
第 3 步：钱包解锁（如果需要）
如果您的钱包设置了密码（这是一个好习惯），在发送交易前必须解锁。
请打开您的 nextBTC 核心节点图形界面 (Qt 客户端)，在菜单栏选择 “设置” (Settings) -> “解锁钱包” (Unlock Wallet)，并输入您的密码。确保右下角的小锁图标处于“打开”状态。
第 4 步：自动处理与等待
确认成本后，程序会自动执行所有后续操作：
智能钱包扫描：程序会自动遍历您节点上所有已加载的钱包，寻找一个拥有足够“零钱”（UTXO）的钱包来发送交易。
自动扇出：如果所有钱包的“零钱”都不够，但某个钱包有足够总余额，程序会智能地发起一笔“扇出”交易（把大额钞票换成零钱），并提示您需要等待一个区块确认（约3-10分钟）后重试。
交易广播：一旦找到合适的钱包，程序会开始逐一发送所有数据分段，并在下方的“操作日志”区域实时显示进度。
 
第 5 步：获取您的“铭文钥匙”——定位信息
当所有分段都成功发送后，日志区会显示一条最重要的信息：
 [区块高度:一长串64位的字符] 
请务必复制并安全保存这个“铭文定位信息”。这是任何人（包括您自己）未来找到并完整读取这篇铭文的唯一凭证。
在这个图例中的钥匙就是：
76469:b83a042e26d14e32bf48da92afa1f4ebb5d57eaf3258dea67e0ec9674cee1e04
3. 📖 读取铭文 (查询)
通过一个简单的起始 TXID，即可在链上还原出完整的铭文内容。
第 1 步：输入起始 TXID
切换到“📖 读取铭文”选项卡。
将您想要查询的那个“起始 TXID”粘贴到输入框中。
第 2 步：查找与还原
点击 [查找并读取] 按钮。
程序会自动：
1.连接到您的节点，获取起始交易。
2.解析出铭文的“指纹”（协议ID和铭文ID）以及总分段数。
3.开始从最新区块向前扫描区块链，精确地寻找所有匹配的交易分段。
4.当所有分段都找齐后，按正确顺序重组，并用 zlib 解压缩。
第 3 步：查看结果
“读取结果”区域会显示出完整的铭文内容。
在内容的最上方，会自动添加一个时间戳 [年-月-日 时:分:秒]，告诉您这篇铭文被创建时的时间（以您的本地时区显示）。
您可以点击 [复制结果文本] 按钮，程序会自动剥离时间戳，只将最核心的铭文内容复制到您的剪贴板。
 
我们也可以在nextBTC官网 上读取这个铭文信息：
公共铭文浏览器： (https://nextbtc.rf.gd/inscriptionv2.html)
 
4. 日志管理
您在程序中进行的所有操作，无论是铭刻还是读取，其详细日志不仅会显示在界面上，还会被自动记录下来。
日志文件位于程序所在目录下的 logs 文件夹内。
日志文件会按天自动分割，例如 250908.log (代表2025年9月8日的日志)。这非常方便您在未来回顾某一天具体发生了什么，或是在遇到问题时进行排查。
现在，您已经完全掌握了 v2.0 版工具的所有功能。去中心化的世界，从记录您的第一条链上铭文开始！
